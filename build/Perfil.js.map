{"version":3,"sources":["../src/Perfil.js"],"names":["Perfil","configuration","ConfigurationContext","structureId","console","Liferay","headers","method","response","setArticles","setPerfil","articles","perfil","emailAddress"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport Libro from \"./Libro\";\r\nimport { Link } from 'react-router-dom';\r\nimport { ConfigurationContext } from './index';\r\nconst Perfil = () => {\r\n    const [articles, setArticles] = useState(undefined);\r\n    const [perfil, setPerfil] = useState(undefined);\r\n    const configuration=useContext(ConfigurationContext);\r\n    const structureId = configuration.portletInstance.structureId;\r\n    console.log(configuration);\r\n    useEffect(() => {\r\n        Liferay.Util.fetch(\r\n            `/o/headless-delivery/v1.0/content-structures/${structureId}/structured-contents?filter=creatorId%20eq%20${Liferay.ThemeDisplay.getUserId()}`, {\r\n                headers: {\r\n                    'Accept': 'application/json'\r\n                },\r\n                method: 'GET'\r\n            }\r\n        )\r\n        .then((response) => response.json()) \r\n        .then((data) =>  setArticles(data));\r\n    }, [structureId]);\r\n\r\n    useEffect(() => {\r\n        Liferay.Util.fetch(\r\n            `/o/headless-admin-user/v1.0/user-accounts/${Liferay.ThemeDisplay.getUserId()}`, {\r\n                headers: {\r\n                    'Accept': 'application/json'\r\n                },\r\n                method: 'GET'\r\n            }\r\n        )\r\n        .then((response) => response.json()) \r\n        .then((data) =>  setPerfil(data));\r\n    }, [Liferay.ThemeDisplay.getUserId()]);\r\n\r\n    if(articles == undefined || perfil == undefined){\r\n        return (\r\n            <div>\r\n                <h2>Nombre de perfil: {Liferay.ThemeDisplay.getUserName()}</h2>\r\n                <Link to={'/libros'}>Ir a todos los libros</Link>\r\n            </div>\r\n         )\r\n    }\r\n    else{\r\n        return (\r\n            <div className=\"container\">\r\n                <h2>{Liferay.ThemeDisplay.getUserName()} Tus libros</h2>\r\n                <p>Tu email: {perfil.emailAddress}</p>\r\n                {articles.totalCount > 0 ? (\r\n                    <ul>\r\n                        {articles.items.map(item => {\r\n                            return (<Libro item={item} />)\r\n                        }\r\n                        )}\r\n                    </ul>\r\n                ) : ( <p>No tienes libros</p>) }\r\n                <Link to={'/libros'}>Ir a todos los libros</Link>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Perfil;"]}